# 微信小程序 - 吉买盛DM优惠
---

用来展示吉买盛百联商城的快讯商品广告，每周更新。

其中值得分享的一点是：  
小程序官方有 swiper 组件，但无法实现纵向的轮播滑动，所以进行了一定的开发。  
但也不难，和普遍的轮播写法是一样的。

* `view` 三层嵌套，一层负责横向纵向和范围大小，二层作为滑动对象并区分左右键等其他元素，三层作为子级拓展更多效果
* 绑定 touchstart & touchmove & touchend 事件，此处推荐使用 catch 而不是 bind，可以阻止苹果机自带的弹性滑动
* 初始设置轮播高度，如获取屏高再减去一个定值，并 `wx.createAnimation()`
* touchstart 存储手指起始位置，touchmove 计算手机移动距离并 translate 该偏移量，touchend 进行回归/翻页判断
* 注意：touchmove 中最好加上一个偏移量大于 10 的判断，不然会和 tap 事件冲突

另一方面是后端给予的数据结构不太妙，所以耗费了一些时间和占用了较多代码，大可忽略。

另外，`flex-grow: 1` 搭配 `height: 100%` 在安卓/苹果机上是有区别的，但高度又必须从父级继承否则会变成子级高度，所以只得用 `calc` 去计算了。