# 微信小程序-玩转购物地
---

此案例 2016 年上海购物节时的活动，本司今年想试试小程序版的，于是让我试着踩下坑，也摸摸微信审核的界限。

主要玩法为：在上海的10个地方有相应的服务点，每个区域对应这地图中的一个板块，扫描该区域中的二维码，即可点亮一块地图，第3/6/10个地图被点亮时，则获得抽奖机会1次。

其它想说的是：

* createCanvasContext 在部分手机上会把该 canvas 提升到层叠上下文的最高。但需求砍掉了有关 canvas 的功能，所以后续如何解决和实际层级没有去尝试。
* canvas 没有蒙版和剪切的功能，所以无法实现刮刮乐效果，本想用 clearRect 来试试，后来需求被砍就没做了。
* flex-grow 在部分苹果机上是无效的，所以换成了 clac 的计算。
* 小程序无法长按识别二维码，但可以先变成预览图片再长按识别。
* 视频播放完成退出后，可能并不会还原到最初