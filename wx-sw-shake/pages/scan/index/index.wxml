<!--index.wxml-->
<view class="body {{isNight ? 'isNight' : 'isDay'}}">
  <view class="wrap-bg">
    <image src="{{baseUrl}}{{isNight?'bg-logo3.png':'bg-logo2.png'}}" class="bg-logo"></image>
  </view>
  <view class="main">
    <view class="top-nav">
      <view class="logo" style="background-image:url({{baseUrl}}{{isNight?'main-logo2.png':'main-logo.png'}})" bindtap="DayOrNight"></view>
      <view class="top-btns">
        <view class="btn btn-rule" bindtap="showRule">
          <image src="{{baseUrl}}{{isNight?'btn-purple.png':'btn-red.png'}}"></image>
          <text>规则</text>
        </view>
        <button class="btn btn-share" open-type="share">
          <image src="{{baseUrl}}{{isNight?'btn-purple.png':'btn-red.png'}}"></image>
          <text>分享</text>
        </button>
        <view class="btn btn-scan" bindtap="scan">
          <image src="{{baseUrl}}{{isNight?'btn-purple.png':'btn-red.png'}}"></image>
          <text>扫码</text>
        </view>
      </view>
    </view>
    <view class="user-box">
      <view class="user-img-box imgRadio">
        <image src="{{user.avatarUrl}}" class="user-img"></image>
      </view>
      <view class="user-info-box">
        <view class="country"><text>国家码：</text>{{'9148352'}}</view>
        <view class="idcard"><text>护照编码：</text>{{user.id}}</view>
        <view class="username text"><text>姓名：</text>{{user.nickName}}</view>
        <view class="usersex"><text>性别：</text>{{user.gender==2?'女':(user.gender?'男':'未知')}}</view>
        <view class="province"><text>地区：</text>{{((user.city||'') + '' + (user.province||'')) || '未知位置'}}</view>
      </view>
    </view>
    <view class="map">
      <view class="wrap-bg">
        <view class="body-mask"></view>
      </view>
      <swiper class="swiper" wx:if="{{isNight==false}}" current="{{nowSwiper}}" bindchange="swiperChange">
        <block wx:for="{{maps_day}}" wx:key="index" wx:for-item="part">
          <swiper-item class="part">
            <view class="list">
              <block wx:for="{{part}}" wx:key="index">
                <view class="item imgRadio {{item.Light? 'hasSign':''}}" bindtap="clickItem">
                  <image src="{{item.Url ? baseUrl+item.Url:''}}" class="item-img"></image>
                  <text class="item-name text">{{item.Name}}</text>
                </view>
              </block>
            </view>
          </swiper-item>
        </block>
      </swiper>
      <swiper class="swiper" wx:if="{{isNight==true}}" current="{{nowSwiper}}" bindchange="swiperChange">
        <block wx:for="{{maps_night}}" wx:key="index" wx:for-item="part">
          <swiper-item class="part">
            <view class="list">
              <block wx:for="{{part}}" wx:key="index">
                <view class="item imgRadio {{item.Light? 'hasSign':''}}" bindtap="clickItem">
                  <image src="{{item.Url ? baseUrl+item.Url:''}}" class="item-img"></image>
                  <text class="item-name text">{{item.Name}}</text>
                </view>
              </block>
            </view>
          </swiper-item>
        </block>
      </swiper>
      <view class="modudu-box" style="background-image: url({{baseUrl}}modudu{{nowSwiper}}s.png)">
      </view>
      <image src="{{baseUrl}}main-title{{nowSwiper}}.png" class="main-title"></image>
      <image src="{{baseUrl}}arrow.png" class="swiper-left {{nowSwiper<1?'disable':''}}" data-type="-1" bindtap="swiperTo"></image>
      <image src="{{baseUrl}}arrow.png" class="swiper-right {{nowSwiper>1?'disable':''}}" data-type="1" bindtap="swiperTo"></image>
    </view>
    <view class="more-prize">
      <view class="progress">
        <view class="progress-bar" style="width:{{progress/30*100}}%">
          <view class="progress-text">{{progress}}</view>
        </view>
      </view>
      <view class="more-prize-box">
        <block wx:for="{{[10, 20, 30]}}" wx:key="*this">
          <view class="prize-box {{index==0 ? 'open' :''}}" data-index="{{item}}" data-open="{{true}}" bindtap="clickBox">
            <view class="box" style="background-image: url({{baseUrl}}prize-box.png)"></view>
            <view class="box-tip" style="background-image: url({{baseUrl}}box-tip.png)"></view>
            <text class="box-num">{{item}}</text>
          </view>
        </block>
      </view>
    </view>
    <view class="bottom">
      <navigator url="../prize/prize" class="btn btn-prize">
        <image src="{{baseUrl}}{{isNight?'btn-big-purple.png':'btn-big-yellow.png'}}"></image>
        <text>点击查看我的奖励</text>
      </navigator>
    </view>
  </view>
</view>

<!-- 规则页 -->
<view class="modal rule {{modal.rule?'in':''}}">
  <view class="bg modal-bg"></view>
  <view class="modal-box rule-box">
    <image src="{{baseUrl}}rule.png" class="rule-img"></image>
    <view class="btn btn-close-rule" bindtap="closeRule">
      <image src="{{baseUrl}}btn-red.png"></image>
      <text>唔晓得啦</text>
    </view>
  </view>
</view>

<!-- 验证页 -->
<view class="modal justify {{modal.justify?'in':''}}">
  <view class="bg modal-bg"></view>
  <view class="modal-box">
    <view class="modudu" style="background-image: url({{baseUrl}}modudu5.png)">
      <view class="other" style="background-image: url({{baseUrl}}word-box.png)">
        <text>答对验证码签到啦！</text>
      </view>
    </view>
    <view class="tip-box">
      <view class="judge-box">
        <view class="question">
          <image src="{{code_question}}"></image>
        </view>
        <view class="answers">
          <block wx:for="{{code_answers}}" wx:key="item.name">
            <image src="{{item.url}}" class="{{item.active?'active':''}}" data-index="{{index}}" data-item="{{item.name}}" bindtap="answer"></image>
          </block>
        </view>
      </view>
      <view class="btn-red" bindtap="justify">确定</view>
    </view>
  </view>
</view>


<!-- 宝箱 -->
<view class="modal prize {{modal.prize?'in':''}}">
  <view class="bg modal-bg"></view>
  <view class="light" style="background-image: url({{baseUrl}}bling.png)"></view>
  <form bindsubmit="click_get_prize" report-submit class="modal-box">
    <button form-type="submit">
      <view class="getPrize-box" style="background-image: url({{baseUrl}}box-close.png)">
        <view class="finger"></view>
        <view class="tip">签到成功可抽奖</view>
      </view>
    </button>
  </form>
</view>

<!-- 中奖 -->
<view class="modal good {{modal.good?'in':''}}">
  <view class="bg modal-bg"></view>
  <view class="light" style="background-image: url({{baseUrl}}bling.png)"></view>
  <view class="modal-box">
    <view class="getPrize-box" style="background-image: url({{baseUrl}}box-open.png)">
      <view class="tip">恭喜您中奖啦</view>
    </view>
    <view class="btn btn-orange" bindtap="result">
      <image src="{{baseUrl}}btn-orange.png"></image>
      <text>点击查看详情</text>
    </view>
  </view>
</view>

<!-- 未中奖 -->
<view class=" modal bad {{modal.bad ? 'in': ''}} ">
  <view class="bg modal-bg"></view>
  <view class="light" style="background-image: url({{baseUrl}}bling.png); opacity:0.4 "></view>
  <view class="modal-box">
    <view class="getPrize-box " style="background-image: url({{baseUrl}}box-close.png) ">
      <view class="tip ">很遗憾！<text>没有中奖</text></view>
    </view>
    <view class="btn btn-orange" bindtap="bad_ok">
      <image src="{{baseUrl}}btn-orange.png"></image>
      <text>返回</text>
    </view>
  </view>
</view>


<!-- 集签条件满足提示 -->
<view class="modal more {{modal.more?'in':''}}">
  <view class="bg modal-bg"></view>
  <view class="bg modal-img-bg" style="background-image: url({{baseUrl}}modal-bg.png)"></view>
  <view class="modal-box more-box">
    <image src="{{baseUrl}}more.png" class="more-img"></image>
    <view class="btn btn-close-rule" bindtap="page_prize2">
      <image src="{{baseUrl}}btn-purple.png"></image>
      <text>抽奖</text>
    </view>
  </view>
</view>


<!-- 宝箱 -->
<view class="modal prize2 {{modal.prize2?'in':''}}">
  <view class="bg modal-bg"></view>
  <view class="light" style="background-image: url({{baseUrl}}bling.png)"></view>
  <form bindsubmit="click_get_prize" data-type="collect" report-submit class="modal-box">
    <button form-type="submit">
      <view class="getPrize-box" style="background-image: url({{baseUrl}}box-close.png)">
        <view class="finger"></view>
        <view class="tip">签到成功可抽奖</view>
      </view>
    </button>
  </form>
</view>


<!-- 奖品详情页 -->
<view class="modal result {{modal.result?'in':''}}">
  <view class="bg" style="background: url({{baseUrl}}prize-bg.jpg) center / 100% 100%"></view>
  <view class="modal-box">
    <view class="qrcode">
      <image src="{{prize.QrCode}}"></image>
      <image src="{{baseUrl}}exchange.png" class="bg" wx:if="{{prize.Take}}"></image>
    </view>
    <view class="title text">{{prize.GiftName || '奖品名称'}}</view>
    <view class="word text">兑换时间：<text>{{prize.Time || '0000.00.00'}}</text></view>
    <view class="word text2">兑换地点：<text>{{prize.Address || '上海购物节活动组委会'}}</text></view>
    <view class="btn btn-ok" bindtap="result_ok">
      <image src="{{baseUrl}}btn-orange.png"></image>
      <text>返回</text>
    </view>
  </view>
</view>